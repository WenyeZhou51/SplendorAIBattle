#:import colours_dict data.colours_dict
#:import border_colours_dict data.border_colours_dict

<Label>:
    color: 0, 0, 0, 1

<Card>:
    size_hint_x: None
    width: 0.66 * self.height
    id: card
    colour_list: colours_dict[self.colour]
    canvas.before:
        # Color:
        #     rgba: 0.6, 0.6, 0.6, 1
        # Rectangle:
        #     pos: self.pos
        #     size: self.size
        Color:
            rgba: root.colour_list
        RoundedRectangle:
            pos: self.x + dp(5), self.y
            size: self.width - dp(10), self.height
            radius: [dp(20) for _ in range(4)]
        Color:
            rgba: 0.1, 0.1, 0.1, 1
        Line:
            rounded_rectangle: [self.x + dp(5), self.y, self.width - dp(10), self.height, dp(20)]
            width: 1.3
    GridLayout:
        pos_hint: {'x': dp(6) / self.width, 'y': 0}
        size_hint_x: None
        width: root.height / 5.5
        cols: 1
        Widget:
        NumberCircle:
            number: root.white
            hide_zeros: True
            colour: 'white'
            padding: dp(2)
        NumberCircle:
            number: root.blue
            hide_zeros: True
            colour: 'blue'
            padding: dp(2)
        NumberCircle:
            number: root.green
            hide_zeros: True
            colour: 'green'
            padding: dp(2)
        NumberCircle:
            number: root.red
            hide_zeros: True
            colour: 'red'
            padding: dp(2)
        NumberCircle:
            number: root.black
            hide_zeros: True
            colour: 'black'
            padding: dp(2)
    Label:
        text: str(root.points)
        pos_hint: {'x': 0.53, 'y': 0.6}
        size_hint_y: None
        size_hint_x: 0.4
        height: 0.4 * root.height
        font_size: 0.8 * self.height

<NumberCircle>:
    font_size: 0.8 * self.height
    text: str(self.number)
    size_hint_y: None
    height: self.width if not self.hidden else 0
    opacity: 0 if self.hidden else 1
    hidden: True if (self.hide_zeros and self.number == 0) else False
    bg_colour: colours_dict[self.colour]
    border_colour: border_colours_dict[self.colour]
    canvas.before:
        Color:
            rgba: root.bg_colour
        Ellipse:
            pos: self.x + self.padding, self.y + self.padding
            size: self.width - 2 * self.padding, self.height - 2 * self.padding
        Color:
            rgba: root.border_colour
        Line:
            ellipse: self.x + self.padding, self.y + self.padding, self.width - 2*self.padding, self.height - 2*self.padding
            width: self.width / 30.
    

<MenuScreen>:
    name: 'menu'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'AI'
            size_hint_y: None
            height: self.texture_size[1] + dp(40)
        Button:
            text: 'play'
            on_release: root.manager.current = 'game'

<CardsDisplay>:
    BoxLayout:
        size_hint_y: None
        height: 0.95 * root.height
        Widget:
        Label:
            text: root.label + ':'
            size_hint_x: None
            width: 1.5 * self.texture_size[0]
            font_size: 0.3 * self.height
        BoxLayout:
            id: boxlayout
            size_hint_x: None
            width: self.minimum_width
        Widget:

<GemsDisplay>:
    BoxLayout:
        id: bl
        size_hint_y: None
        height: 0.95 * root.height
        Widget:
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.white
            colour: 'white'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.blue
            colour: 'blue'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.green
            colour: 'green'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.red
            colour: 'red'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.black
            colour: 'black'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.gold
            colour: 'gold'
        Widget:

<PlayerGemsDisplay>:
    BoxLayout:
        id: bl
        size_hint_y: None
        height: 0.95 * root.height
        Widget:
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.white
            colour: 'white'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.blue
            colour: 'blue'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.green
            colour: 'green'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.red
            colour: 'red'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.black
            colour: 'black'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.gold
            colour: 'gold'
        Widget:

<PlayerDisplay>:
    BoxLayout:
        size_hint_x: 0.95
        size_hint_y: 0.95
        orientation: 'horizontal'
        Label:
            text: root.name + ':'
            font_size: 0.3 * self.height
            size_hint_x: 0.15
            text_size: self.size
            halign: 'right'
            valign: 'middle'
        Widget:
            size_hint_x: 0.02
        GemsDisplay:
            white: root.white
            blue: root.blue
            green: root.green
            red: root.red
            black: root.black
            gold: root.gold

<GameScreen>:
    name: 'game'
    BoxLayout:
        orientation: 'vertical'
        PlayerDisplay:
            size_hint_y: None
            height: dp(60)
            white: root.supply_white
            blue: root.supply_blue
            green: root.supply_green
            red: root.supply_red
            black: root.supply_black
            gold: root.supply_gold
            name: 'supply'
        PlayerDisplay:
            size_hint_y: None
            height: dp(60)
            name: 'P2 gems'
            white: root.p2_white
            blue: root.p2_blue
            green: root.p2_green
            red: root.p2_red
            black: root.p2_black
            gold: root.p2_gold
        CardsDisplay:
            label: '3'
            cards: root.tier_3_cards
        CardsDisplay:
            label: '2'
            cards: root.tier_2_cards
        CardsDisplay:
            label: '1'
            cards: root.tier_1_cards
        PlayerDisplay:
            name: 'your gems'
            size_hint_y: None
            height: dp(60)
            white: root.p1_white
            blue: root.p1_blue
            green: root.p1_green
            red: root.p1_red
            black: root.p1_black
            gold: root.p1_gold

    

<Root>:
    # MenuScreen:
    GameScreen:
            

