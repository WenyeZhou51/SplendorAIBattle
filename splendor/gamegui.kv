#:import colours_dict data.colours_dict
#:import border_colours_dict data.border_colours_dict

<Label>:
    color: 0, 0, 0, 1

<Card>:
    size_hint_x: None
    width: 0.66 * self.height
    id: card
    colour_list: colours_dict[self.colour]
    canvas.before:
        # Color:
        #     rgba: 0.6, 0.6, 0.6, 1
        # Rectangle:
        #     pos: self.pos
        #     size: self.size
        Color:
            rgba: root.colour_list
        RoundedRectangle:
            pos: self.x + dp(5), self.y
            size: self.width - dp(10), self.height
            radius: [dp(20) for _ in range(4)]
        Color:
            rgba: 0.1, 0.1, 0.1, 1
        Line:
            rounded_rectangle: [self.x + dp(5), self.y, self.width - dp(10), self.height, dp(20)]
            width: 1.3
    GridLayout:
        pos_hint: {'x': dp(6) / self.width, 'y': 0}
        size_hint_x: None
        width: root.height / 5.5
        cols: 1
        Widget:
        NumberCircle:
            number: root.white
            hide_zeros: True
            colour: 'white'
        NumberCircle:
            number: root.blue
            hide_zeros: True
            colour: 'blue'
        NumberCircle:
            number: root.green
            hide_zeros: True
            colour: 'green'
        NumberCircle:
            number: root.red
            hide_zeros: True
            colour: 'red'
        NumberCircle:
            number: root.black
            hide_zeros: True
            colour: 'black'
    Label:
        text: str(root.points)
        pos_hint: {'x': 0.53, 'y': 0.6}
        size_hint_y: None
        size_hint_x: 0.4
        height: 0.4 * root.height
        font_size: 0.8 * self.height

<NumberCircle>:
    font_size: 0.8 * self.height
    text: str(self.number)
    size_hint_y: None
    height: self.width if not self.hidden else 0
    opacity: 0 if self.hidden else 1
    hidden: True if (self.hide_zeros and self.number == 0) else False
    bg_colour: colours_dict[self.colour]
    border_colour: border_colours_dict[self.colour]
    canvas.before:
        Color:
            rgba: root.bg_colour
        Ellipse:
            pos: self.pos
            size: self.size
        Color:
            rgba: root.border_colour
        Line:
            ellipse: self.x, self.y, self.width, self.height
            width: self.width / 30.
    

<MenuScreen>:
    name: 'menu'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'AI'
            size_hint_y: None
            height: self.texture_size[1] + dp(40)
        Button:
            text: 'play'
            on_release: root.manager.current = 'game'

<CardsDisplay>:
    BoxLayout:
        size_hint_y: None
        height: 0.95 * root.height
        Label:
            text: root.label + ':'
            size_hint_x: None
            width: 1.5 * self.texture_size[0]
            font_size: 0.3 * self.height
        BoxLayout:
            id: boxlayout

<GemsDisplay>:
    BoxLayout:
        id: bl
        size_hint_y: None
        height: 0.95 * root.height
        Widget:
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.white
            colour: 'white'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.blue
            colour: 'blue'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.green
            colour: 'green'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.red
            colour: 'red'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.black
            colour: 'black'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.gold
            colour: 'gold'
        Widget:

<PlayerGemsDisplay>:
    BoxLayout:
        id: bl
        size_hint_y: None
        height: 0.95 * root.height
        Widget:
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.white
            colour: 'white'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.blue
            colour: 'blue'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.green
            colour: 'green'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.red
            colour: 'red'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.black
            colour: 'black'
        Widget:
            size_hint_x: None
            width: dp(10)
        NumberCircle:
            size_hint_x: None
            width: bl.height
            number: root.gold
            colour: 'gold'
        Widget:

<PlayerDisplay>:
    BoxLayout:
        size_hint_x: 0.95
        size_hint_y: 0.95
        orientation: 'vertical'
        Label:
            text: root.name
            size_hint_y: None
            height: self.texture_size[1] + dp(20)
        BoxLayout:
            orientation: 'horizontal'
            GemsDisplay:
                white: root.white
                blue: root.blue
                green: root.green
                red: root.red
                black: root.black
                gold: root.gold

<GameScreen>:
    name: 'game'
    BoxLayout:
        orientation: 'vertical'
        GemsDisplay:
            size_hint_y: None
            height: dp(100)
            white: root.supply_white
            blue: root.supply_blue
            green: root.supply_green
            red: root.supply_red
            black: root.supply_black
            gold: root.supply_gold
        CardsDisplay:
            size_hint_y: None
            height: dp(240)
            label: '1'
            cards: root.tier_1_cards
        CardsDisplay:
            size_hint_y: None
            height: dp(240)
            label: '2'
            cards: root.tier_2_cards
        # TierDisplay:
        #     size_hint_y: None
        #     height: dp(240)
            # tier_name: '3'
        #     cards: root.tier_3_cards
        BoxLayout:
            orientation: 'horizontal'
            PlayerDisplay:
                size_hint_y: None
                height: dp(120)
        Widget:

    

<Root>:
    # MenuScreen:
    GameScreen:
            

